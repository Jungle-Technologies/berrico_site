import{c as h,j as e,H as j}from"./heart.pl3ai1q6.js";import{R as b,r as p}from"./index.DYrVU9rO.js";const y=t=>{let s;const l=new Set,o=(n,m)=>{const a=typeof n=="function"?n(s):n;if(!Object.is(a,s)){const u=s;s=m??(typeof a!="object"||a===null)?a:Object.assign({},s,a),l.forEach(v=>v(s,u))}},i=()=>s,r={setState:o,getState:i,getInitialState:()=>x,subscribe:n=>(l.add(n),()=>l.delete(n))},x=s=t(o,i,r);return r},k=(t=>t?y(t):y),N=t=>t;function C(t,s=N){const l=b.useSyncExternalStore(t.subscribe,b.useCallback(()=>s(t.getState()),[t,s]),b.useCallback(()=>s(t.getInitialState()),[t,s]));return b.useDebugValue(l),l}const g=t=>{const s=k(t),l=o=>C(s,o);return Object.assign(l,s),l},S=(t=>t?g(t):g),f=S(t=>({id:null,step:1,rating:0,feedback:"",email:"",phone:"",setId:s=>t({id:s}),setStep:s=>t({step:s}),setRating:s=>t({rating:s}),setFeedback:s=>t({feedback:s}),setEmail:s=>t({email:s}),setPhone:s=>t({phone:s}),reset:()=>t({id:null,step:1,rating:0,feedback:"",email:"",phone:""})}));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F=h("arrow-right",D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],E=h("frown",A);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],P=h("meh",I);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]],M=h("smile-plus",_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],O=h("smile",T),R=[{value:1,Icon:E,label:"Unhappy"},{value:2,Icon:P,label:"Neutral"},{value:3,Icon:O,label:"Good"},{value:4,Icon:M,label:"Very Good"},{value:5,Icon:j,label:"Loved it"}],$=()=>{const{rating:t,setRating:s,feedback:l,setFeedback:o,setStep:i,setId:d}=f(),[c,r]=p.useState(""),[x,n]=p.useState(!1),m=async()=>{if(t===0){r("Please select a rating");return}r(""),n(!0);try{const a=await fetch("https://berrico.iisiichaa.com/api/v1/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:t,feedback:l})});if(!a.ok)throw new Error("Something went wrong. Please try again.");const u=await a.json();if(u.id)d(u.id),i(2);else throw new Error("Invalid response from server.")}catch(a){r("Failed to save feedback. Please try again."),console.error(a),n(!1)}};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center w-full",children:[e.jsx("p",{className:"text-[10px] font-bold tracking-[0.2em] text-gray-400 uppercase mb-4",children:"Step 1 of 2"}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-serif text-[#59062A] leading-tight mb-8",children:["How was your",e.jsx("br",{}),"Berrico experience?"]})]}),e.jsx("div",{className:"flex justify-center gap-3 md:gap-5 mb-8",children:R.map(a=>{const u=t===a.value;return e.jsxs("div",{className:"relative group",children:[u&&e.jsx("div",{className:"absolute inset-0 bg-[#FCD7E5] rounded-2xl scale-125 -z-10 animate-in fade-in zoom-in duration-300 transform -translate-y-1",style:{width:"130%",height:"130%",left:"-15%",top:"-15%"}}),e.jsx("button",{type:"button",onClick:()=>{s(a.value),r("")},className:`
                    w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 cursor-pointer
                    ${u?"bg-[#7d133a] text-white shadow-lg":"bg-berrico-pink text-[#7d133a] hover:bg-berrico-pink"}
                    `,"aria-label":a.label,children:e.jsx(a.Icon,{className:"w-6 h-6",strokeWidth:2.5})})]},a.value)})}),c&&e.jsx("p",{className:"text-red-500 text-center text-sm mb-4",children:c}),e.jsxs("div",{className:"w-full mb-6",children:[e.jsx("label",{htmlFor:"feedback",className:"block text-[#2C2C2C] font-bold mb-2 text-sm",children:"Your Feedback"}),e.jsx("textarea",{id:"feedback",value:l,onChange:a=>o(a.target.value),placeholder:"Tell us more...",className:"w-full h-24 bg-[#FCFDF9] rounded-xl p-4 text-[#2C2C2C] placeholder:text-[#2C2C2C]/20 resize-none focus:outline-none focus:ring-2 focus:ring-[#FBDDE5] transition-all border border-gray-100"})]})]}),e.jsx("div",{className:"w-full",children:e.jsx("button",{type:"button",onClick:m,disabled:x,className:"w-full bg-[#7D0A3D] text-white py-2 cursor-pointer rounded-xl font-bold text-lg flex items-center justify-center gap-2 hover:bg-[#59062A] transition-colors group shadow-lg shadow-[#7D0A3D]/20 disabled:opacity-70 disabled:cursor-wait",children:x?"Saving...":e.jsxs(e.Fragment,{children:["Next ",e.jsx(F,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})})]})},w=({label:t,required:s,placeholder:l,value:o,onChange:i,type:d="text",id:c})=>e.jsxs("div",{className:"mb-4 w-full text-left",children:[e.jsxs("label",{htmlFor:c,className:"block text-[#2C2C2C] font-bold mb-2 text-sm",children:[t," ",s&&e.jsx("span",{className:"text-[#7D0A3D]",children:"*"}),!s&&e.jsx("span",{className:"font-normal text-[#2C2C2C]/40 ml-1",children:"(optional)"})]}),e.jsx("input",{id:c,type:d,value:o,onChange:i,placeholder:l,className:"w-full bg-[#F3FCE8]/50 rounded-xl p-4 text-[#2C2C2C] placeholder:text-[#2C2C2C]/20 focus:outline-none focus:ring-2 focus:ring-[#FBDDE5] transition-all border border-gray-100"})]}),z=()=>{const{email:t,phone:s,setEmail:l,setPhone:o,setStep:i,id:d}=f(),[c,r]=p.useState(!1),[x,n]=p.useState(""),m=async()=>{if(!t||!t.includes("@")){n("Please provide a valid email address.");return}n(""),r(!0);try{if(!d)throw new Error("Missing feedback ID.");if(!(await fetch(`https://berrico.iisiichaa.com/api/v1/feedback/${d}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,phone:s})})).ok)throw new Error("Something went wrong. Please try again.");i(3)}catch(a){n("Failed to submit feedback. Please try again."),console.error(a),r(!1)}};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center w-full mb-6",children:[e.jsx("p",{className:"text-[10px] font-bold tracking-[0.2em] text-gray-400 uppercase mb-4",children:"Step 2 of 2"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-serif text-[#59062A] leading-tight mb-2",children:"Almost There"}),e.jsx("p",{className:"text-[#2C2C2C]/60 text-sm leading-relaxed max-w-xs mx-auto",children:"Please provide your contact details so we can follow up if needed."})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(w,{id:"email",label:"Email Address",required:!0,placeholder:"hello@example.com",value:t,onChange:a=>l(a.target.value),type:"email"}),e.jsx(w,{id:"phone",label:"Phone Number",placeholder:"+1 (555) 000-0000",value:s,onChange:a=>o(a.target.value),type:"tel"})]}),x&&e.jsx("p",{className:"text-red-500 text-center text-sm mb-4",children:x})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("button",{type:"button",onClick:m,disabled:c,className:"w-full bg-[#7D0A3D] text-white py-2 rounded-xl font-bold text-lg flex items-center justify-center gap-2 hover:bg-[#59062A] transition-colors disabled:opacity-70 disabled:cursor-wait shadow-lg shadow-[#7D0A3D]/20 mt-6",children:c?"Submitting...":"Submit Feedback"}),e.jsx("button",{type:"button",onClick:()=>i(1),className:"w-full text-[#2C2C2C]/40 text-sm font-bold mt-4 cursor-pointer hover:text-[#2C2C2C]/60 transition-colors",children:"Back"})]})]})},B=()=>{const{reset:t}=f();return e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-[#FCD7E5] rounded-full flex items-center justify-center mb-6 animate-in zoom-in duration-500",children:e.jsx(j,{className:"w-10 h-10 text-[#7D0A3D]",fill:"#7D0A3D"})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-serif text-[#59062A] leading-tight mb-4 text-center",children:"Thank You!"}),e.jsx("p",{className:"text-[#2C2C2C]/60 text-center max-w-xs mx-auto mb-8",children:"We appreciate you taking the time to share your experience with us."}),e.jsx("button",{type:"button",onClick:t,className:"w-full bg-[#7D0A3D] text-white py-2 cursor-pointer rounded-xl font-bold text-lg hover:bg-[#59062A] transition-colors shadow-lg shadow-[#7D0A3D]/20",children:"Close"})]})},q=()=>{const{step:t}=f();return e.jsxs("div",{className:"w-full max-w-[500px] mx-auto p-4 md:p-6 flex flex-col relative",children:[t<3&&e.jsx("div",{className:"w-full h-1.5 bg-gray-100 rounded-full mb-8 overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#7D0A3D] transition-all duration-500 ease-out rounded-full",style:{width:t===1?"50%":"100%"}})}),t===1&&e.jsx($,{}),t===2&&e.jsx(z,{}),t===3&&e.jsx(B,{})]})};export{q as FeedbackForm};
